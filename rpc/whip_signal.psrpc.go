// Code generated by protoc-gen-psrpc v0.6.0, DO NOT EDIT.
// source: rpc/whip_signal.proto

package rpc

import (
	"context"

	"github.com/vibtreeofficial/psrpc"
	"github.com/vibtreeofficial/psrpc/pkg/client"
	"github.com/vibtreeofficial/psrpc/pkg/info"
	"github.com/vibtreeofficial/psrpc/pkg/rand"
	"github.com/vibtreeofficial/psrpc/pkg/server"
	"github.com/vibtreeofficial/psrpc/version"
)
import google_protobuf "google.golang.org/protobuf/types/known/emptypb"

var _ = version.PsrpcVersion_0_6

// =====================
// WHIP Client Interface
// =====================

type WHIPClient[TopicTopicType ~string] interface {
	Create(ctx context.Context, topic TopicTopicType, req *WHIPCreateRequest, opts ...psrpc.RequestOption) (*WHIPCreateResponse, error)

	// Close immediately, without waiting for pending RPCs
	Close()
}

// =========================
// WHIP ServerImpl Interface
// =========================

type WHIPServerImpl interface {
	Create(context.Context, *WHIPCreateRequest) (*WHIPCreateResponse, error)
}

// =====================
// WHIP Server Interface
// =====================

type WHIPServer[TopicTopicType ~string] interface {
	RegisterCreateTopic(topic TopicTopicType) error
	DeregisterCreateTopic(topic TopicTopicType)
	RegisterAllCommonTopics(topic TopicTopicType) error
	DeregisterAllCommonTopics(topic TopicTopicType)

	// Close and wait for pending RPCs to complete
	Shutdown()

	// Close immediately, without waiting for pending RPCs
	Kill()
}

// ===========
// WHIP Client
// ===========

type wHIPClient[TopicTopicType ~string] struct {
	client *client.RPCClient
}

// NewWHIPClient creates a psrpc client that implements the WHIPClient interface.
func NewWHIPClient[TopicTopicType ~string](bus psrpc.MessageBus, opts ...psrpc.ClientOption) (WHIPClient[TopicTopicType], error) {
	sd := &info.ServiceDefinition{
		Name: "WHIP",
		ID:   rand.NewClientID(),
	}

	sd.RegisterMethod("Create", false, false, true, true)

	rpcClient, err := client.NewRPCClient(sd, bus, opts...)
	if err != nil {
		return nil, err
	}

	return &wHIPClient[TopicTopicType]{
		client: rpcClient,
	}, nil
}

func (c *wHIPClient[TopicTopicType]) Create(ctx context.Context, topic TopicTopicType, req *WHIPCreateRequest, opts ...psrpc.RequestOption) (*WHIPCreateResponse, error) {
	return client.RequestSingle[*WHIPCreateResponse](ctx, c.client, "Create", []string{string(topic)}, req, opts...)
}

func (s *wHIPClient[TopicTopicType]) Close() {
	s.client.Close()
}

// ===========
// WHIP Server
// ===========

type wHIPServer[TopicTopicType ~string] struct {
	svc WHIPServerImpl
	rpc *server.RPCServer
}

// NewWHIPServer builds a RPCServer that will route requests
// to the corresponding method in the provided svc implementation.
func NewWHIPServer[TopicTopicType ~string](svc WHIPServerImpl, bus psrpc.MessageBus, opts ...psrpc.ServerOption) (WHIPServer[TopicTopicType], error) {
	sd := &info.ServiceDefinition{
		Name: "WHIP",
		ID:   rand.NewServerID(),
	}

	s := server.NewRPCServer(sd, bus, opts...)

	sd.RegisterMethod("Create", false, false, true, true)
	return &wHIPServer[TopicTopicType]{
		svc: svc,
		rpc: s,
	}, nil
}

func (s *wHIPServer[TopicTopicType]) RegisterCreateTopic(topic TopicTopicType) error {
	return server.RegisterHandler(s.rpc, "Create", []string{string(topic)}, s.svc.Create, nil)
}

func (s *wHIPServer[TopicTopicType]) DeregisterCreateTopic(topic TopicTopicType) {
	s.rpc.DeregisterHandler("Create", []string{string(topic)})
}

func (s *wHIPServer[TopicTopicType]) allCommonTopicRegisterers() server.RegistererSlice {
	return server.RegistererSlice{
		server.NewRegisterer(s.RegisterCreateTopic, s.DeregisterCreateTopic),
	}
}

func (s *wHIPServer[TopicTopicType]) RegisterAllCommonTopics(topic TopicTopicType) error {
	return s.allCommonTopicRegisterers().Register(topic)
}

func (s *wHIPServer[TopicTopicType]) DeregisterAllCommonTopics(topic TopicTopicType) {
	s.allCommonTopicRegisterers().Deregister(topic)
}

func (s *wHIPServer[TopicTopicType]) Shutdown() {
	s.rpc.Close(false)
}

func (s *wHIPServer[TopicTopicType]) Kill() {
	s.rpc.Close(true)
}

// ================================
// WHIPParticipant Client Interface
// ================================

type WHIPParticipantClient[TopicTopicType ~string] interface {
	ICETrickle(ctx context.Context, topic TopicTopicType, req *WHIPParticipantICETrickleRequest, opts ...psrpc.RequestOption) (*google_protobuf.Empty, error)

	ICERestart(ctx context.Context, topic TopicTopicType, req *WHIPParticipantICERestartRequest, opts ...psrpc.RequestOption) (*WHIPParticipantICERestartResponse, error)

	DeleteSession(ctx context.Context, topic TopicTopicType, req *WHIPParticipantDeleteSessionRequest, opts ...psrpc.RequestOption) (*google_protobuf.Empty, error)

	// Close immediately, without waiting for pending RPCs
	Close()
}

// ====================================
// WHIPParticipant ServerImpl Interface
// ====================================

type WHIPParticipantServerImpl interface {
	ICETrickle(context.Context, *WHIPParticipantICETrickleRequest) (*google_protobuf.Empty, error)

	ICERestart(context.Context, *WHIPParticipantICERestartRequest) (*WHIPParticipantICERestartResponse, error)

	DeleteSession(context.Context, *WHIPParticipantDeleteSessionRequest) (*google_protobuf.Empty, error)
}

// ================================
// WHIPParticipant Server Interface
// ================================

type WHIPParticipantServer[TopicTopicType ~string] interface {
	RegisterICETrickleTopic(topic TopicTopicType) error
	DeregisterICETrickleTopic(topic TopicTopicType)
	RegisterICERestartTopic(topic TopicTopicType) error
	DeregisterICERestartTopic(topic TopicTopicType)
	RegisterDeleteSessionTopic(topic TopicTopicType) error
	DeregisterDeleteSessionTopic(topic TopicTopicType)
	RegisterAllCommonTopics(topic TopicTopicType) error
	DeregisterAllCommonTopics(topic TopicTopicType)

	// Close and wait for pending RPCs to complete
	Shutdown()

	// Close immediately, without waiting for pending RPCs
	Kill()
}

// ======================
// WHIPParticipant Client
// ======================

type wHIPParticipantClient[TopicTopicType ~string] struct {
	client *client.RPCClient
}

// NewWHIPParticipantClient creates a psrpc client that implements the WHIPParticipantClient interface.
func NewWHIPParticipantClient[TopicTopicType ~string](bus psrpc.MessageBus, opts ...psrpc.ClientOption) (WHIPParticipantClient[TopicTopicType], error) {
	sd := &info.ServiceDefinition{
		Name: "WHIPParticipant",
		ID:   rand.NewClientID(),
	}

	sd.RegisterMethod("ICETrickle", false, false, true, true)
	sd.RegisterMethod("ICERestart", false, false, true, true)
	sd.RegisterMethod("DeleteSession", false, false, true, true)

	rpcClient, err := client.NewRPCClient(sd, bus, opts...)
	if err != nil {
		return nil, err
	}

	return &wHIPParticipantClient[TopicTopicType]{
		client: rpcClient,
	}, nil
}

func (c *wHIPParticipantClient[TopicTopicType]) ICETrickle(ctx context.Context, topic TopicTopicType, req *WHIPParticipantICETrickleRequest, opts ...psrpc.RequestOption) (*google_protobuf.Empty, error) {
	return client.RequestSingle[*google_protobuf.Empty](ctx, c.client, "ICETrickle", []string{string(topic)}, req, opts...)
}

func (c *wHIPParticipantClient[TopicTopicType]) ICERestart(ctx context.Context, topic TopicTopicType, req *WHIPParticipantICERestartRequest, opts ...psrpc.RequestOption) (*WHIPParticipantICERestartResponse, error) {
	return client.RequestSingle[*WHIPParticipantICERestartResponse](ctx, c.client, "ICERestart", []string{string(topic)}, req, opts...)
}

func (c *wHIPParticipantClient[TopicTopicType]) DeleteSession(ctx context.Context, topic TopicTopicType, req *WHIPParticipantDeleteSessionRequest, opts ...psrpc.RequestOption) (*google_protobuf.Empty, error) {
	return client.RequestSingle[*google_protobuf.Empty](ctx, c.client, "DeleteSession", []string{string(topic)}, req, opts...)
}

func (s *wHIPParticipantClient[TopicTopicType]) Close() {
	s.client.Close()
}

// ======================
// WHIPParticipant Server
// ======================

type wHIPParticipantServer[TopicTopicType ~string] struct {
	svc WHIPParticipantServerImpl
	rpc *server.RPCServer
}

// NewWHIPParticipantServer builds a RPCServer that will route requests
// to the corresponding method in the provided svc implementation.
func NewWHIPParticipantServer[TopicTopicType ~string](svc WHIPParticipantServerImpl, bus psrpc.MessageBus, opts ...psrpc.ServerOption) (WHIPParticipantServer[TopicTopicType], error) {
	sd := &info.ServiceDefinition{
		Name: "WHIPParticipant",
		ID:   rand.NewServerID(),
	}

	s := server.NewRPCServer(sd, bus, opts...)

	sd.RegisterMethod("ICETrickle", false, false, true, true)
	sd.RegisterMethod("ICERestart", false, false, true, true)
	sd.RegisterMethod("DeleteSession", false, false, true, true)
	return &wHIPParticipantServer[TopicTopicType]{
		svc: svc,
		rpc: s,
	}, nil
}

func (s *wHIPParticipantServer[TopicTopicType]) RegisterICETrickleTopic(topic TopicTopicType) error {
	return server.RegisterHandler(s.rpc, "ICETrickle", []string{string(topic)}, s.svc.ICETrickle, nil)
}

func (s *wHIPParticipantServer[TopicTopicType]) DeregisterICETrickleTopic(topic TopicTopicType) {
	s.rpc.DeregisterHandler("ICETrickle", []string{string(topic)})
}

func (s *wHIPParticipantServer[TopicTopicType]) RegisterICERestartTopic(topic TopicTopicType) error {
	return server.RegisterHandler(s.rpc, "ICERestart", []string{string(topic)}, s.svc.ICERestart, nil)
}

func (s *wHIPParticipantServer[TopicTopicType]) DeregisterICERestartTopic(topic TopicTopicType) {
	s.rpc.DeregisterHandler("ICERestart", []string{string(topic)})
}

func (s *wHIPParticipantServer[TopicTopicType]) RegisterDeleteSessionTopic(topic TopicTopicType) error {
	return server.RegisterHandler(s.rpc, "DeleteSession", []string{string(topic)}, s.svc.DeleteSession, nil)
}

func (s *wHIPParticipantServer[TopicTopicType]) DeregisterDeleteSessionTopic(topic TopicTopicType) {
	s.rpc.DeregisterHandler("DeleteSession", []string{string(topic)})
}

func (s *wHIPParticipantServer[TopicTopicType]) allCommonTopicRegisterers() server.RegistererSlice {
	return server.RegistererSlice{
		server.NewRegisterer(s.RegisterICETrickleTopic, s.DeregisterICETrickleTopic),
		server.NewRegisterer(s.RegisterICERestartTopic, s.DeregisterICERestartTopic),
		server.NewRegisterer(s.RegisterDeleteSessionTopic, s.DeregisterDeleteSessionTopic),
	}
}

func (s *wHIPParticipantServer[TopicTopicType]) RegisterAllCommonTopics(topic TopicTopicType) error {
	return s.allCommonTopicRegisterers().Register(topic)
}

func (s *wHIPParticipantServer[TopicTopicType]) DeregisterAllCommonTopics(topic TopicTopicType) {
	s.allCommonTopicRegisterers().Deregister(topic)
}

func (s *wHIPParticipantServer[TopicTopicType]) Shutdown() {
	s.rpc.Close(false)
}

func (s *wHIPParticipantServer[TopicTopicType]) Kill() {
	s.rpc.Close(true)
}

var psrpcFileDescriptor10 = []byte{
	// 703 bytes of a gzipped FileDescriptorProto
	0x1f, 0x8b, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0xff, 0xc4, 0x55, 0xdd, 0x6e, 0xd3, 0x30,
	0x14, 0x96, 0xdb, 0x6e, 0xa2, 0xa7, 0xeb, 0xd8, 0x0c, 0xdb, 0x4a, 0xaa, 0x89, 0xae, 0x30, 0x28,
	0x12, 0x4a, 0x45, 0x91, 0x60, 0xe2, 0x06, 0x89, 0x51, 0x44, 0x25, 0x84, 0xa6, 0x74, 0x02, 0x89,
	0x0b, 0xa2, 0xd4, 0x71, 0x3b, 0x6b, 0x49, 0x6c, 0x6c, 0xb7, 0x53, 0xc5, 0x13, 0xec, 0x86, 0x1b,
	0xde, 0x64, 0xdc, 0xf1, 0x26, 0x5c, 0xf1, 0x2a, 0x28, 0x4e, 0xd6, 0xb5, 0x6b, 0xf6, 0x23, 0x6e,
	0x76, 0xe7, 0x7c, 0x3e, 0x3e, 0xdf, 0xf9, 0xbe, 0x73, 0xec, 0xc0, 0x9a, 0x14, 0xa4, 0x79, 0x74,
	0xc0, 0x84, 0xab, 0xd8, 0x20, 0xf2, 0x02, 0x5b, 0x48, 0xae, 0x39, 0xce, 0x4b, 0x41, 0xac, 0xea,
	0x80, 0xf3, 0x41, 0x40, 0x9b, 0x06, 0xea, 0x0d, 0xfb, 0x4d, 0x1a, 0x0a, 0x3d, 0x4e, 0x22, 0xac,
	0x32, 0x17, 0x9a, 0xf1, 0x48, 0xa5, 0x9f, 0xd5, 0x90, 0xfa, 0xcc, 0x73, 0x25, 0x1f, 0x6a, 0x2a,
	0x5d, 0x16, 0x69, 0x2a, 0x27, 0xd9, 0xac, 0xf5, 0x99, 0x4d, 0xa9, 0x49, 0x82, 0xd7, 0x7f, 0xe4,
	0x61, 0xf5, 0xf3, 0xfb, 0xce, 0xde, 0xae, 0xa4, 0x9e, 0xa6, 0x0e, 0xfd, 0x36, 0xa4, 0x4a, 0xe3,
	0xd7, 0x50, 0x56, 0xda, 0x93, 0xda, 0x55, 0x54, 0x29, 0xc6, 0xa3, 0x0a, 0xaa, 0xa1, 0x46, 0xa9,
	0x65, 0xd9, 0xd3, 0x59, 0xec, 0x6e, 0x1c, 0xd2, 0x4d, 0x22, 0x9c, 0x25, 0x35, 0xf5, 0x85, 0xab,
	0x50, 0xe4, 0xfd, 0x3e, 0x95, 0xae, 0xf2, 0x45, 0x25, 0x57, 0x43, 0x8d, 0xa2, 0x73, 0xcb, 0x00,
	0x5d, 0x5f, 0xe0, 0xef, 0xb0, 0xa9, 0x86, 0x3d, 0x45, 0x24, 0xeb, 0x51, 0xdf, 0x15, 0x9e, 0xd4,
	0x8c, 0x30, 0xe1, 0x45, 0xda, 0xd5, 0xd2, 0x23, 0x87, 0xaa, 0x92, 0xaf, 0xe5, 0x1b, 0xa5, 0xd6,
	0x4b, 0x5b, 0x0a, 0x62, 0xcf, 0x15, 0x67, 0x77, 0x27, 0x67, 0xf7, 0xce, 0x8e, 0xee, 0x9b, 0x93,
	0xed, 0x48, 0xcb, 0xb1, 0x53, 0x55, 0x17, 0x47, 0x58, 0x4f, 0xa1, 0x68, 0x56, 0x1f, 0x98, 0xd2,
	0xf8, 0x3e, 0x94, 0x0c, 0xa5, 0x1b, 0x79, 0x21, 0x55, 0x15, 0x54, 0xcb, 0x37, 0x8a, 0x0e, 0x18,
	0xe8, 0x63, 0x8c, 0x58, 0x02, 0x6a, 0x57, 0xd1, 0xe1, 0x15, 0xc8, 0x1f, 0xd2, 0xb1, 0xb1, 0xa8,
	0xe8, 0xc4, 0x4b, 0xfc, 0x02, 0x16, 0x46, 0x5e, 0x30, 0xa4, 0x46, 0x79, 0xa9, 0x55, 0xbb, 0x40,
	0xc8, 0xa4, 0x0e, 0x27, 0x09, 0x7f, 0x95, 0xdb, 0x41, 0xf5, 0xdf, 0x08, 0xf0, 0x74, 0xa8, 0x12,
	0x3c, 0x52, 0x14, 0x6f, 0x02, 0x78, 0x91, 0x3a, 0x4a, 0x1d, 0x4d, 0xb8, 0x8a, 0x09, 0x12, 0x5b,
	0xba, 0x0d, 0xcb, 0xd3, 0x3e, 0x32, 0x3f, 0x35, 0xbd, 0x3c, 0x85, 0x76, 0x7c, 0xbc, 0x03, 0x25,
	0x46, 0xa8, 0xab, 0xa8, 0x1c, 0x51, 0x79, 0xea, 0xf3, 0xc6, 0x6c, 0x57, 0x3b, 0xbb, 0xed, 0xae,
	0xd9, 0x77, 0x80, 0x11, 0x9a, 0x2c, 0x15, 0x7e, 0x08, 0xcb, 0xc9, 0x49, 0xd3, 0xdf, 0x98, 0xa0,
	0x60, 0x08, 0x96, 0x4c, 0x8c, 0x01, 0x3b, 0x7e, 0xfd, 0x0f, 0x82, 0x5a, 0x5c, 0xfc, 0x94, 0x53,
	0x9d, 0xdd, 0xf6, 0xbe, 0x64, 0xe4, 0x30, 0x98, 0x0c, 0x17, 0x86, 0x82, 0xe4, 0x3c, 0x4c, 0x45,
	0x98, 0x35, 0x7e, 0x06, 0x77, 0x67, 0xeb, 0xa7, 0x91, 0x66, 0x7a, 0x9c, 0xaa, 0xb8, 0x33, 0xa3,
	0x22, 0xd9, 0xca, 0x90, 0x9c, 0xcf, 0x92, 0x7c, 0xad, 0xc2, 0xf1, 0x16, 0x2c, 0x29, 0x5f, 0xb8,
	0x7d, 0xe9, 0x0d, 0x42, 0x1a, 0xe9, 0xca, 0x82, 0x89, 0x29, 0x29, 0x5f, 0xbc, 0x4b, 0xa1, 0xfa,
	0xaf, 0x4c, 0x6d, 0x0e, 0x35, 0x73, 0x7f, 0x33, 0xda, 0xce, 0x57, 0x5d, 0x98, 0xaf, 0x3a, 0x80,
	0xad, 0x4b, 0x8a, 0x4e, 0x87, 0x6b, 0xde, 0x23, 0x74, 0x0d, 0x8f, 0x72, 0xf3, 0x6c, 0x3f, 0x11,
	0x3c, 0x38, 0x47, 0xf7, 0x96, 0x06, 0x54, 0x9f, 0x66, 0xb9, 0x11, 0x9b, 0x5a, 0x5f, 0xa1, 0x10,
	0x17, 0x85, 0x3f, 0xc1, 0x62, 0x72, 0xab, 0xf0, 0x7a, 0xf6, 0x8d, 0xb4, 0x36, 0xe6, 0xf0, 0xc4,
	0xa1, 0x7a, 0xf5, 0xe4, 0x18, 0x6d, 0xac, 0x20, 0x6b, 0x15, 0x16, 0x09, 0x0f, 0x43, 0x1e, 0xe1,
	0x05, 0xcd, 0x05, 0x23, 0x15, 0xb4, 0x83, 0x5a, 0x7f, 0x73, 0x70, 0xfb, 0x9c, 0x6a, 0xdc, 0x07,
	0x38, 0x9b, 0x7c, 0xbc, 0x3d, 0xc9, 0x7b, 0xd9, 0xcd, 0xb0, 0xd6, 0xed, 0xe4, 0xb9, 0xb7, 0x4f,
	0x9f, 0x7b, 0xbb, 0x1d, 0x3f, 0xf7, 0xf5, 0x7b, 0x27, 0xc7, 0x68, 0x2d, 0x93, 0x1d, 0x8f, 0x0c,
	0x4f, 0xda, 0xd0, 0x0b, 0x79, 0x66, 0xa7, 0xd4, 0x7a, 0x74, 0x55, 0x58, 0xaa, 0xfa, 0x12, 0xde,
	0x00, 0xca, 0x33, 0x9d, 0xc5, 0x8d, 0xac, 0x9c, 0x59, 0xcd, 0xff, 0x0f, 0x95, 0x6f, 0x9e, 0x7c,
	0x79, 0x3c, 0x60, 0xfa, 0x60, 0xd8, 0xb3, 0x09, 0x0f, 0x9b, 0x23, 0xd6, 0xd3, 0x92, 0x52, 0xde,
	0xef, 0x33, 0xc2, 0xbc, 0x20, 0xf9, 0x39, 0x12, 0x1e, 0x34, 0xa5, 0x20, 0xbd, 0x45, 0xf3, 0xf5,
	0xfc, 0x5f, 0x00, 0x00, 0x00, 0xff, 0xff, 0x5a, 0xed, 0xd1, 0x9c, 0x56, 0x07, 0x00, 0x00,
}
